<!DOCTYPE html>
<main class="main-content border-radius-lg ">

    <div class="container-fluid">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <button class="btn btn-info float-end" (click)="addUserPopup()" type="button" data-bs-toggle="modal"
                    data-bs-target="#addEditUserModal">
                    Add new user
                </button>
            </div>
            <hr class="horizontal dark mt-0 mb-2">
            <div class="card-body table-responsive">
                <div class="">
                    <table class="table text-dark" cellspacing="0" width="100%" aria-describedby="all_patients_info">
                        <thead>
                            <tr class="text-center">
                                <th scope="col">ID</th>
                                <th scope="col">Name</th>
                                <!-- <th scope="col">Mobile</th> -->
                                <th scope="col">Email</th>
                                <th scope="col">Role</th>
                                <th scope="col">Language</th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr *ngFor="let user_data of all_user_data; let i=index" class="text-center">
                                <th scope="row">{{ i+1 }}</th>
                                <td>{{ user_data.name }}</td>
                                <!-- <td>{{ user_data.mobile }}</td> -->
                                <td>{{ user_data.email }}</td>
                                <td>{{ user_data.role }}</td>
                                <td>{{ user_data.language }}</td>

                                <td>
                                    <button class="btn" (click)="editUserPopup(user_data.id)" data-bs-toggle="modal"
                                        data-bs-target="#addEditUserModal"><i class="fas fa-pen-to-square"></i></button>

                                    <button class="btn" (click)="deleteUser(user_data.id)"><i
                                            class="fas fa-trash"></i></button>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>

        </div>

    </div>
</main>


<!-- Modal -->
<div class="modal fade" id="addEditUserModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5 text-center" id="ModalLabel">{{popup_header}}</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-10 offset-md-1">
                        <form [formGroup]="addEditUserForm">
                            
                            <div class="form-holder">
                              <span class="bi bi-person"></span>
                              <input name="fullName" type="text" formControlName="name" class="form-control" placeholder="Full Name" />
                              
                            </div>
                    
                            <div class="form-holder">
                              <span class="bi bi-envelope"></span>
                              <input type="email" name="email" formControlName="email" class="form-control" id="email"
                                placeholder="Your email" />
                              
                            </div>
                    
                            <div class="form-holder">
                              <span class="bi bi-translate"></span>
                              <select class="form-select" aria-label="language" formControlName="language"
                                aria-placeholder="Select your language">
                                <option value="eng">English</option>
                                <option value="fr">French</option>
                                <option value="arab">Arab</option>
                                <option value="spain">Spain</option>
                              </select>
                            </div>
                    
                            <div class="form-holder">
                              <span class="bi bi-person"></span>
                              <select class="form-select" aria-label="language" formControlName="role" aria-placeholder="Select your role">
                                <option value="seller">Admin</option>
                                <option value="seller">Seller</option>
                                <option value="buyer">Buyer</option>
                              </select>
                            </div>
                    
                            <div class="form-holder">
                              <span class="bi bi-lock"></span>
                              <input name="password" type="password" formControlName="password" class="form-control"
                                placeholder="Password" />
                              
                            </div>
                            <div class="form-holder">
                              <span class="bi bi-lock"></span>
                              <input name="confirmPassword" type="password" formControlName="confirmPassword" class="form-control"
                                placeholder="Confirm Password" />
                              
                            </div>

                            <div class="modal-footer">
                                
                                <button type="button" class="btn-primary btn" (click)="addUser()" *ngIf="add_user">Add</button>
                                <button type="button" class="btn-primary btn" (click)="updateUser()" data-bs-dismiss="modal" *ngIf="edit_user">Update</button>
                            </div>  
                            
                        </form>
                    </div>
                </div>
            </div>
           
        </div>
    </div>
</div>